---
description: firex CLIã®æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’npmã«ãƒªãƒªãƒ¼ã‚¹
allowed-tools: Bash(git *), Bash(npm *), Bash(gh *), Read, Edit
---

# Release - firexæ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒªãƒªãƒ¼ã‚¹

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€firex CLIã®æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’npmã«ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ãŸã‚ã®ä¸€é€£ã®æ‰‹é †ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †

ä»¥ä¸‹ã®é †åºã§å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

### 1. å‰ææ¡ä»¶ãƒã‚§ãƒƒã‚¯

ã¾ãšã€æœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ãŒã‚ã‚‹ã‹ç¢ºèªã—ã¾ã™ï¼š

```bash
git status --porcelain
```

**æœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ãŒã‚ã‚‹å ´åˆ:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã—ã¦ãã ã•ã„
- å¿…è¦ã§ã‚ã‚Œã° `/commit` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆ
- ã‚³ãƒŸãƒƒãƒˆå¾Œã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å†å®Ÿè¡Œ

### 2. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

ãƒªãƒªãƒ¼ã‚¹å‰ã«ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªï¼š

```bash
npm test
npm run typecheck
```

**ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸå ´åˆ:**
- ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š
- ãƒªãƒªãƒ¼ã‚¹ã‚’ä¸­æ–­

### 3. ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ±ºå®š

ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã€æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ±ºå®šã—ã¾ã™ï¼š

```bash
# ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
node -p "require('./package.json').version"

# æœ€è¿‘ã®ã‚³ãƒŸãƒƒãƒˆã‚’ç¢ºèªã—ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®š
git log --oneline -10
```

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ã®åˆ¤å®šåŸºæº–:**
- **patch (0.1.1 â†’ 0.1.2)**: ãƒã‚°ä¿®æ­£ã®ã¿ï¼ˆ`fix:`, `docs:` ãªã©ï¼‰
- **minor (0.1.1 â†’ 0.2.0)**: æ–°æ©Ÿèƒ½è¿½åŠ ï¼ˆ`feat:` ãªã©ï¼‰
- **major (0.1.1 â†’ 1.0.0)**: ç ´å£Šçš„å¤‰æ›´ï¼ˆ`BREAKING CHANGE`ï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ææ¡ˆã—ã€ç¢ºèªã‚’å–ã£ã¦ãã ã•ã„ã€‚

### 4. CHANGELOG.mdæ›´æ–°

æœ€æ–°ã®ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã‹ã‚‰å¤‰æ›´å†…å®¹ã‚’æŠ½å‡ºã—ã€CHANGELOG.mdã«è¿½è¨˜ã—ã¾ã™ï¼š

```bash
# å‰å›ã®ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã‹ã‚‰ç¾åœ¨ã¾ã§ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—
git log $(git describe --tags --abbrev=0 2>/dev/null || echo "HEAD~10")..HEAD --oneline
```

CHANGELOG.mdã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:
```markdown
## [X.Y.Z] - YYYY-MM-DD

### Added
- æ–°æ©Ÿèƒ½ã®èª¬æ˜

### Fixed
- ãƒã‚°ä¿®æ­£ã®èª¬æ˜

### Changed
- å¤‰æ›´å†…å®¹ã®èª¬æ˜
```

**æ³¨æ„**: ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã®ãƒªãƒ³ã‚¯å‚ç…§ã‚‚æ›´æ–°ã—ã¦ãã ã•ã„ï¼š
```markdown
[Unreleased]: https://github.com/your-org/firex/compare/vX.Y.Z...HEAD
[X.Y.Z]: https://github.com/your-org/firex/compare/vX.Y.Z-1...vX.Y.Z
```

### 5. ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ã‚¿ã‚°ä½œæˆ

npm versionã‚³ãƒãƒ³ãƒ‰ã§ä¸€æ‹¬å‡¦ç†ï¼ˆpackage.jsonã®`version`ã¨`postversion`ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè‡ªå‹•å®Ÿè¡Œï¼‰ï¼š

```bash
# patch/minor/major ã®ã„ãšã‚Œã‹ã‚’é¸æŠ
npm version patch  # ã¾ãŸã¯ minor / major
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š
1. package.jsonã®versionæ›´æ–°
2. `npm run build` ã®å®Ÿè¡Œï¼ˆprepareã‚¹ã‚¯ãƒªãƒ—ãƒˆçµŒç”±ï¼‰
3. git commitï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ä»˜ãï¼‰
4. git tag vX.Y.Z
5. git push && git push --tagsï¼ˆpostversionçµŒç”±ï¼‰

**æ³¨æ„**: npm versionã‚’å®Ÿè¡Œã™ã‚‹å‰ã«CHANGELOG.mdã®æ›´æ–°ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠãã“ã¨

### 6. CHANGELOGæ›´æ–°ã®ã‚³ãƒŸãƒƒãƒˆï¼ˆnpm versionå‰ã«å®Ÿè¡Œï¼‰

```bash
git add CHANGELOG.md
git commit -m "docs: update CHANGELOG for vX.Y.Z

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
```

### 7. npmã¸ã®å…¬é–‹

```bash
npm publish
```

**æ³¨æ„**: åˆå›å…¬é–‹æ™‚ã‚„ã‚¹ã‚³ãƒ¼ãƒ—ä»˜ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å ´åˆã¯ `npm publish --access public` ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚

### 8. GitHubãƒªãƒªãƒ¼ã‚¹ä½œæˆ

ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’CHANGELOGã‹ã‚‰æŠ½å‡ºã—ã€GitHubãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆï¼š

```bash
gh release create vX.Y.Z \
  --title "firex vX.Y.Z" \
  --notes "[CHANGELOGã‹ã‚‰æŠ½å‡ºã—ãŸãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ]"
```

### 9. å®Œäº†å ±å‘Š

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»¥ä¸‹ã‚’å ±å‘Šï¼š
- ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸URL: https://www.npmjs.com/package/firex
- GitHubãƒªãƒªãƒ¼ã‚¹URL
- ä¸»ãªå¤‰æ›´å†…å®¹ã®ã‚µãƒãƒªãƒ¼

## æ³¨æ„äº‹é …

- ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯firexãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã§ã™
- å¿…ãšmasterãƒ–ãƒ©ãƒ³ãƒã§å®Ÿè¡Œã—ã¦ãã ã•ã„
- ãƒªãƒªãƒ¼ã‚¹ä½œæˆå‰ã«ãƒ†ã‚¹ãƒˆãŒé€šã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã¯æ‰‹å‹•ã§ç¢ºèªãƒ»æ‰¿èªã‚’å¾—ã¦ã‹ã‚‰é€²ã‚ã¦ãã ã•ã„
- npm loginãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„

## ã‚¨ãƒ©ãƒ¼å‡¦ç†

å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ:
1. ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š
2. ä¿®æ­£æ–¹æ³•ã‚’ææ¡ˆ
3. å¿…è¦ã«å¿œã˜ã¦ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ã‚’æ¡ˆå†…

### npm publishå¤±æ•—æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã‚¿ã‚°ã®å‰Šé™¤
git tag -d vX.Y.Z

# ãƒªãƒ¢ãƒ¼ãƒˆã‚¿ã‚°ã®å‰Šé™¤ï¼ˆãƒ—ãƒƒã‚·ãƒ¥æ¸ˆã¿ã®å ´åˆï¼‰
git push origin :refs/tags/vX.Y.Z

# ã‚³ãƒŸãƒƒãƒˆã®å–ã‚Šæ¶ˆã—ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
git reset --hard HEAD~1
```

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```bash
# ãƒ•ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆæ‰‹å‹•ç¢ºèªã‚ã‚Šï¼‰
npm test && npm run typecheck
# CHANGELOG.md ã‚’ç·¨é›†
git add CHANGELOG.md && git commit -m "docs: update CHANGELOG for vX.Y.Z"
npm version patch  # ã¾ãŸã¯ minor / major
npm publish
gh release create vX.Y.Z --title "firex vX.Y.Z" --notes "..."
```
